<!DOCTYPE html>
<html lang="sw">
<head>
    <meta charset="UTF-8">
    <title>Report Card - Shule ERP</title>
    <style>
        body { font-family: 'Times New Roman', serif; background: #f4f4f4; padding: 20px; }
        .report-page { background: white; width: 210mm; min-height: 297mm; margin: auto; padding: 40px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        .header { text-align: center; line-height: 1.2; margin-bottom: 20px; text-transform: uppercase; }
        .header h2, .header h3 { margin: 5px 0; font-weight: bold; }
        
        .student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
        
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border: 1px solid black; padding: 8px; text-align: center; text-transform: uppercase; font-size: 12px; }
        th { background: #f0f0f0; }
        .subject-col { text-align: left; padding-left: 10px; font-weight: bold; }

        .grading-key { display: flex; justify-content: space-between; font-size: 11px; margin-top: 15px; border: 1px solid #000; padding: 10px; }
        .footer-sections { margin-top: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .signature-line { border-bottom: 1px dotted black; margin-top: 40px; }

        @media print {
            body { background: none; padding: 0; }
            .report-page { box-shadow: none; border: none; width: 100%; margin: 0; }
            button { display: none; }
        }
    </style>
</head>
<body>

<div style="text-align: center; margin-bottom: 10px;">
    <button onclick="window.print()" style="padding: 10px 20px; cursor: pointer; background: #0d6efd; color: white; border: none; border-radius: 4px;">Print Report Card</button>
</div>

<div class="report-page">
    <div class="header">
        <h3>OFISI YA WAZIRI MKUU</h3>
        <h3>TAWALA ZA MIKOA NA SERIKALI ZA MTAA</h3>
        <h2>HALMASHAURI YA JIJI LA ARUSHA</h2>
        <h2>SHULE YA SEKONDARI OLMOTI</h2>
        <p>S.L.P 8249, ARUSHA</p>
        <h3 style="text-decoration: underline; margin-top: 15px;">TAARIFA YA MAENDELEO YA MWANAFUNZI</h3>
    </div>

    <div class="student-info">
        <div><strong>JINA:</strong> <span id="studentName">...</span></div>
        <div><strong>KIDATO:</strong> <span id="studentClass">...</span></div>
        <div><strong>MUHULA:</strong> <span>I / 2025</span></div>
        <div><strong>MWAKA:</strong> <span>2025</span></div>
    </div>

    <table>
        <thead>
            <tr>
                <th>SOMO</th>
                <th>JARIBIO</th>
                <th>MTIHANI</th>
                <th>JUMLA</th>
                <th>WASTANI</th>
                <th>DARAJA</th>
                <th>MAONI</th>
            </tr>
        </thead>
        <tbody id="reportTbody">
            </tbody>
    </table>

    <div class="grading-key">
        <div>A = 75 - 100 (VIZURI SANA)</div>
        <div>B = 65 - 74 (VIZURI)</div>
        <div>C = 45 - 64 (WASTANI)</div>
        <div>D = 30 - 44 (INARIDHISHA)</div>
        <div>F = 0 - 29 (FELI)</div>
    </div>

    <div class="footer-sections">
        <div>
            <p>Maoni ya mwalimu wa darasa:</p>
            <div class="signature-line"></div>
        </div>
        <div>
            <p>Maoni ya mkuu wa shule:</p>
            <div class="signature-line"></div>
        </div>
    </div>
</div>

<script type="module">
    import { db } from "./firebase.js";
    import { subjectLists } from "./data.js";
    import { collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    async function generateReport() {
        // In a real app, you would get this ID from the URL: ?id=STUDENT_ID
        const urlParams = new URLSearchParams(window.location.search);
        const studentId = urlParams.get('id'); 
        
        if(!studentId) return alert("No Student ID provided");

        // 1. Fetch Student Details
        // 2. Fetch Results for this StudentId
        // 3. Fill the table...
    }
    
    // generateReport();
</script>
</body>
</html>
